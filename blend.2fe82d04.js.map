{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAU,CACdC,QAAS,CACP,YACE,0EAIN,IAAIC,EAAO,EAEX,MAAMC,EAAWC,SAASC,cAAc,eAElCC,EAAQF,SAASC,cAAc,aAErC,IAMIE,EAAW,IAAIC,sBAiEnB,SAAsBC,EAASC,GAC7BD,EAAQE,SAAQC,IACVA,EAAMC,iBACRX,GAAQ,EACRY,EAASZ,GAAMa,MAAKC,IAClBC,EAAWD,EAAKE,MATxB,IAAoBC,EAAOC,GAAPD,EAYVE,OAAOL,EAAKf,QAAQ,qBAZHmB,EAajBC,OAAOL,EAAKf,QAAQ,qBAZrBqB,KAAKC,KAAKJ,EAAQC,MAeLlB,GACVQ,EAASc,UAAUlB,EAAM,I,MApFf,CACpBmB,KAAM,KACNC,WAAY,QACZC,UAAW,IAcbC,eAAed,EAASe,EAAO,GAC7B,IAKE,aAJuB/B,EAAAgC,QAAMC,IAC3B,sEAAsEF,IACtE7B,E,CAGF,MAAOgC,GACPC,QAAQD,MAAMA,E,EAWlB,SAASf,EAAWiB,GAClBD,QAAQE,IAAID,GACZ,MAAME,EAAYF,EACfG,KACCC,GACE,iBAAiBA,EAAIC,aAAaD,EAAIE,WAAWC,8BAEpDC,KAAK,IACRvC,EAASwC,mBAAmB,YAAaP,E,CAf3CtB,IAAWC,MAAKC,IACZiB,QAAQE,IAAI,OAAOnB,GACrBC,EAAWD,EAAKE,MAChBX,EAASqC,QAAQtC,EAAM","sources":["src/blend.js"],"sourcesContent":["import axios from 'axios';\n\nconst options = {\n  headers: {\n    'x-api-key':\n      'live_7NieatcJCRwlfbZ3HKACehAWPhhAQHHlsuf5F8ssvqQ6umSknviBXXdl6fmJ5Zcp',\n  },\n};\n\nlet page = 0;\n\nconst catsList = document.querySelector('.cat-render');\n// const loadMoreBtn = document.querySelector('.load-more')\nconst guard = document.querySelector('.guard-js');\n\nlet observerOptions = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1.0,\n};\n\nlet observer = new IntersectionObserver(observerFunc, observerOptions);\n\n// loadMoreBtn.addEventListener(\"click\", onLoadMore)\n\n// fetch('https://api.thecatapi.com/v1/images/search?limit=10',options).then(resp=>{\n// if(!resp.ok){\n//     throw new Error(\"Not OK\")\n// }\n// return resp.json()\n// }).then(data=>console.log(data))\n\nasync function getImage(page = 0) {\n  try {\n    const response = await axios.get(\n      `https://api.thecatapi.com/v1/images/search?limit=10&order=Asc&page=${page}`,\n      options\n    );\n    return response;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ngetImage().then(resp => {\n    console.log(\"resp\",resp)\n  catsRender(resp.data);\n  observer.observe(guard);\n  //   loadMoreBtn.removeAttribute(\"hidden\")\n});\n\nfunction catsRender(catArr) {\n  console.log(catArr);\n  const catMarkup = catArr\n    .map(\n      cat =>\n        `<li><img src=\"${cat.url}\" alt=\"${cat.categories.name}\" width=\"300px\"></li>`\n    )\n    .join('');\n  catsList.insertAdjacentHTML('beforeend', catMarkup);\n\n  //\n}\n\n//   function onLoadMore(){\n\n// page+=1;\n// getImage(page).then(resp=>{\n\n//     console.log(resp)\n//     catsRender(resp.data)\n//     // +resp.headers['pagination-page'])\n//     const pages = countPages(Number(resp.headers['pagination-count']), Number(resp.headers['pagination-limit']))\n\n//     if(pages===page){\n//         loadMoreBtn.hidden=true;\n//     }\n\n// }\n// )\n//   }\n\nfunction countPages(total, limit) {\n  return Math.ceil(total / limit);\n}\n\nfunction observerFunc(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      getImage(page).then(resp => {\n        catsRender(resp.data);\n\n        const pages = countPages(\n          Number(resp.headers['pagination-count']),\n          Number(resp.headers['pagination-limit'])\n        );\n\n        if (pages === page) {\n            observer.unobserve(guard)\n        }\n      });\n    }\n  });\n}\n"],"names":["$2shzp","parcelRequire","$98c8876f4eec4204$var$options","headers","$98c8876f4eec4204$var$page","$98c8876f4eec4204$var$catsList","document","querySelector","$98c8876f4eec4204$var$guard","$98c8876f4eec4204$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$98c8876f4eec4204$var$getImage","then","resp","$98c8876f4eec4204$var$catsRender","data","total","limit","Number","Math","ceil","unobserve","root","rootMargin","threshold","async","page1","default","get","error","console","catArr","log","catMarkup","map","cat","url","categories","name","join","insertAdjacentHTML","observe"],"version":3,"file":"blend.2fe82d04.js.map"}