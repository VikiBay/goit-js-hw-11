{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAEMC,EAAU,CACdC,QAAS,CACP,YACE,0EAIFC,EAAO,EAELC,EAAWC,SAASC,cAAc,eAElCC,EAAQF,SAASC,cAAc,aAQjCE,EAAW,IAAIC,sBAiEnB,SAAsBC,EAASC,GAC7BD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,gBAERC,EADAZ,GAAQ,GACOa,MAAK,SAAAC,GAGlB,IAXYC,EAAOC,EASnBC,EAAWH,EAAKI,OATJH,EAYVI,OAAOL,EAAKf,QAAQ,qBAZHiB,EAajBG,OAAOL,EAAKf,QAAQ,qBAZrBqB,KAAKC,KAAKN,EAAQC,MAeLhB,GACVQ,EAASc,UAAUlB,E,SApFT,CACpBmB,KAAM,KACNC,WAAY,QACZC,UAAW,I,SAcEb,I,OAAAc,EAAQC,MAAAC,KAAAC,U,UAARH,I,OAAAA,EAAfI,EAAAlC,EAAA,CAAAkC,EAAAC,GAAAC,MAAA,SAAAC,I,IAAwBC,EAEdC,EAAQC,EAAAP,U,yEAFMK,EAAAE,EAAAC,OAAA,YAAAD,EAAA,GAAQA,EAAA,GAAD,E,kBAEJE,EAAAC,QAAMC,IAC3B,sEAA2EC,OAALP,GACtEpC,G,cAFIqC,EAAQO,EAAAC,K,kBAIPR,G,gCAEPS,QAAQC,MAAKH,EAAAI,I,yDARFpB,EAAQC,MAAAC,KAAAC,U,CAmBvB,SAASZ,EAAW8B,GAClBH,QAAQI,IAAID,GACZ,IAAME,EAAYF,EACfG,KACC,SAAAC,G,MACE,iBAAkCV,OAAjBU,EAAIC,IAAI,WAA6BX,OAApBU,EAAIE,WAAWC,KAAK,wB,IAEzDC,KAAK,IACRtD,EAASuD,mBAAmB,YAAaP,E,CAf3CrC,IAAWC,MAAK,SAAAC,GACZ8B,QAAQI,IAAI,OAAOlC,GACrBG,EAAWH,EAAKI,MAChBb,EAASoD,QAAQrD,E","sources":["src/blend.js"],"sourcesContent":["import axios from 'axios';\n\nconst options = {\n  headers: {\n    'x-api-key':\n      'live_7NieatcJCRwlfbZ3HKACehAWPhhAQHHlsuf5F8ssvqQ6umSknviBXXdl6fmJ5Zcp',\n  },\n};\n\nlet page = 0;\n\nconst catsList = document.querySelector('.cat-render');\n// const loadMoreBtn = document.querySelector('.load-more')\nconst guard = document.querySelector('.guard-js');\n\nlet observerOptions = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1.0,\n};\n\nlet observer = new IntersectionObserver(observerFunc, observerOptions);\n\n// loadMoreBtn.addEventListener(\"click\", onLoadMore)\n\n// fetch('https://api.thecatapi.com/v1/images/search?limit=10',options).then(resp=>{\n// if(!resp.ok){\n//     throw new Error(\"Not OK\")\n// }\n// return resp.json()\n// }).then(data=>console.log(data))\n\nasync function getImage(page = 0) {\n  try {\n    const response = await axios.get(\n      `https://api.thecatapi.com/v1/images/search?limit=10&order=Asc&page=${page}`,\n      options\n    );\n    return response;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ngetImage().then(resp => {\n    console.log(\"resp\",resp)\n  catsRender(resp.data);\n  observer.observe(guard);\n  //   loadMoreBtn.removeAttribute(\"hidden\")\n});\n\nfunction catsRender(catArr) {\n  console.log(catArr);\n  const catMarkup = catArr\n    .map(\n      cat =>\n        `<li><img src=\"${cat.url}\" alt=\"${cat.categories.name}\" width=\"300px\"></li>`\n    )\n    .join('');\n  catsList.insertAdjacentHTML('beforeend', catMarkup);\n\n  //\n}\n\n//   function onLoadMore(){\n\n// page+=1;\n// getImage(page).then(resp=>{\n\n//     console.log(resp)\n//     catsRender(resp.data)\n//     // +resp.headers['pagination-page'])\n//     const pages = countPages(Number(resp.headers['pagination-count']), Number(resp.headers['pagination-limit']))\n\n//     if(pages===page){\n//         loadMoreBtn.hidden=true;\n//     }\n\n// }\n// )\n//   }\n\nfunction countPages(total, limit) {\n  return Math.ceil(total / limit);\n}\n\nfunction observerFunc(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      getImage(page).then(resp => {\n        catsRender(resp.data);\n\n        const pages = countPages(\n          Number(resp.headers['pagination-count']),\n          Number(resp.headers['pagination-limit'])\n        );\n\n        if (pages === page) {\n            observer.unobserve(guard)\n        }\n      });\n    }\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$9bba15c715d97817$var$options","headers","$9bba15c715d97817$var$page","$9bba15c715d97817$var$catsList","document","querySelector","$9bba15c715d97817$var$guard","$9bba15c715d97817$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","$9bba15c715d97817$var$getImage","then","resp","total","limit","$9bba15c715d97817$var$catsRender","data","Number","Math","ceil","unobserve","root","rootMargin","threshold","$9bba15c715d97817$var$_getImage","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","page1","response","_args","length","$dIxxU","default","get","concat","_ctx","sent","console","error","t0","catArr","log","catMarkup","map","cat","url","categories","name","join","insertAdjacentHTML","observe"],"version":3,"file":"blend.c1671d69.js.map"}